# Rime schema
# encoding: utf-8

schema:
  schema_id: nihongo_romaji
  name: 日本語ローマ字
  version: "0.1"
  author:
    - StarBrilliant <m13253@hotmail.com>
  description: |
    日本語ローマ字入力

switches:
  - name: ascii_mode
    reset: 0
    states: [ 英数, かな ]
  - name: full_shape
    states: [ 半角, 全角 ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator

speller:
  alphabet: "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-~/,."
  delimiter: " "
  algebra:
    - "derive/ー/-/"
    - "derive/〜/~/"
    - "derive/・/\\x2f/"
    - "xform/ん/nn/"
    - "xform/ゃ/xya/"
    - "xform/ゅ/xyu/"
    - "xform/ょ/xyo/"
    - "xform/ぁ/xa/"
    - "xform/あ/a/"
    - "xform/ぃ/xi/"
    - "xform/い/i/"
    - "xform/ぅ/xu/"
    - "xform/う/u/"
    - "xform/ぇ/xe/"
    - "xform/え/e/"
    - "xform/ぉ/xo/"
    - "xform/お/o/"
    - "xform/か/ka/"
    - "xform/が/ga/"
    - "xform/き/ki/"
    - "xform/ぎ/gi/"
    - "xform/く/ku/"
    - "xform/ぐ/gu/"
    - "xform/け/ke/"
    - "xform/げ/ge/"
    - "xform/こ/ko/"
    - "xform/ご/go/"
    - "xform/さ/sa/"
    - "xform/ざ/za/"
    - "xform/し/shi/"
    - "xform/じ/ji/"
    - "xform/す/su/"
    - "xform/ず/zu/"
    - "xform/せ/se/"
    - "xform/ぜ/ze/"
    - "xform/そ/so/"
    - "xform/ぞ/zo/"
    - "xform/た/ta/"
    - "xform/だ/da/"
    - "xform/ち/chi/"
    - "xform/ぢ/di/"
    - "xform/っ/xtsu/"
    - "xform/つ/tsu/"
    - "xform/づ/du/"
    - "xform/て/te/"
    - "xform/で/de/"
    - "xform/と/to/"
    - "xform/ど/do/"
    - "xform/な/na/"
    - "xform/に/ni/"
    - "xform/ぬ/nu/"
    - "xform/ね/ne/"
    - "xform/の/no/"
    - "xform/は/ha/"
    - "xform/ば/ba/"
    - "xform/ぱ/pa/"
    - "xform/ひ/hi/"
    - "xform/び/bi/"
    - "xform/ぴ/pi/"
    - "xform/ふ/fu/"
    - "xform/ぶ/bu/"
    - "xform/ぷ/pu/"
    - "xform/へ/he/"
    - "xform/べ/be/"
    - "xform/ぺ/pe/"
    - "xform/ほ/ho/"
    - "xform/ぼ/bo/"
    - "xform/ぽ/po/"
    - "xform/ま/ma/"
    - "xform/み/mi/"
    - "xform/む/mu/"
    - "xform/め/me/"
    - "xform/も/mo/"
    - "xform/や/ya/"
    - "xform/ゆ/yu/"
    - "xform/よ/yo/"
    - "xform/ら/ra/"
    - "xform/り/ri/"
    - "xform/る/ru/"
    - "xform/れ/re/"
    - "xform/ろ/ro/"
    - "xform/ゎ/xwa/"
    - "xform/わ/wa/"
    - "xform/ゐ/whi/"
    - "xform/ゑ/whe/"
    - "xform/を/wo/"
    - "xform/ゔ/vu/"
    - "xform/vux([aieo])/v$1/"
    - "derive/jix([auo])/j$1/"
    - "derive/fu/hu/"
    - "derive/fux([aieo])/f$1/"
    - "derive/fuxy([auo])/fy$1/"
    - "derive/([bcdfghjkmnpqrstvwyz])ix/$1/"
    - "derive/xtsu([bcdfghjkmpqrstvwyz])/$1$1/"
    - "derive/x/l/"
    - "derive/tsu/tu/"
    - "derive/zu/du/"
    - "derive/shi/si/"
    - "derive/shi/ci/"
    - "derive/chi/ti/"
    - "derive/kix([aieo])/q$1/"
    - "fuzz/nn/n/"

translator:
  dictionary: nihongo_romaji
  enable_sentence: true
  preedit_format:
    - "xform/ //"
    - "xform/qu/ku/"
    - "xform/q/kix/"
    - "xform/ti/chi/"
    - "xform/ci/shi/"
    - "xform/si/shi/"
    - "xform/du/zu/"
    - "xform/tu/tsu/"
    - "xform/l/x/"
    - "xform/hu/fu/"
    - "xform/jixy([auo])/j$1/"
    - "xform/f([aieo])/fux$1/"
    - "xform/fy([auo])/fuxy$1/"
    - "xform/([bcdfghjkmpqrstvwyz])\\1/っ$1/"
    - "xform/([bcdfghjkmnpqrstvwyz])y/$1ixy/"
    - "xform/xyo/ょ/"
    - "xform/xyu/ゅ/"
    - "xform/xya/ゃ/"
    - "xform/v([aieo])/vux$1/"
    - "xform/vu/ゔ/"
    - "xform/wo/を/"
    - "xform/whe/ゑ/"
    - "xform/whi/ゐ/"
    - "xform/xwa/ゎ/"
    - "xform/wa/わ/"
    - "xform/xtsu/っ/"
    - "xform/tsu/つ/"
    - "xform/chi/ち/"
    - "xform/shi/し/"
    - "xform/ro/ろ/"
    - "xform/re/れ/"
    - "xform/ru/る/"
    - "xform/ri/り/"
    - "xform/ra/ら/"
    - "xform/yo/よ/"
    - "xform/yu/ゆ/"
    - "xform/ya/や/"
    - "xform/mo/も/"
    - "xform/me/め/"
    - "xform/mu/む/"
    - "xform/mi/み/"
    - "xform/ma/ま/"
    - "xform/po/ぽ/"
    - "xform/bo/ぼ/"
    - "xform/ho/ほ/"
    - "xform/pe/ぺ/"
    - "xform/be/べ/"
    - "xform/he/へ/"
    - "xform/pu/ぷ/"
    - "xform/bu/ぶ/"
    - "xform/fu/ふ/"
    - "xform/pi/ぴ/"
    - "xform/bi/び/"
    - "xform/hi/ひ/"
    - "xform/pa/ぱ/"
    - "xform/ba/ば/"
    - "xform/ha/は/"
    - "xform/no/の/"
    - "xform/ne/ね/"
    - "xform/nu/ぬ/"
    - "xform/ni/に/"
    - "xform/na/な/"
    - "xform/do/ど/"
    - "xform/to/と/"
    - "xform/de/で/"
    - "xform/te/て/"
    - "xform/du/づ/"
    - "xform/di/ぢ/"
    - "xform/da/だ/"
    - "xform/ta/た/"
    - "xform/zo/ぞ/"
    - "xform/so/そ/"
    - "xform/ze/ぜ/"
    - "xform/se/せ/"
    - "xform/zu/ず/"
    - "xform/su/す/"
    - "xform/ji/じ/"
    - "xform/za/ざ/"
    - "xform/sa/さ/"
    - "xform/go/ご/"
    - "xform/ko/こ/"
    - "xform/ge/げ/"
    - "xform/ke/け/"
    - "xform/gu/ぐ/"
    - "xform/ku/く/"
    - "xform/gi/ぎ/"
    - "xform/ki/き/"
    - "xform/ga/が/"
    - "xform/ka/か/"
    - "xform/xo/ぉ/"
    - "xform/o/お/"
    - "xform/xe/ぇ/"
    - "xform/e/え/"
    - "xform/xu/ぅ/"
    - "xform/u/う/"
    - "xform/xi/ぃ/"
    - "xform/i/い/"
    - "xform/xa/ぁ/"
    - "xform/a/あ/"
    - "xform/nn/ん/"
    - "xform/n/ん/"
    - "xform/\\x2f/・/"
    - "xform/~/〜/"
    - "xform/-/ー/"

punctuator:
  import_preset: default
  full_shape:
    " " : { commit: "　" }
    "\\" : [ ￥ ]
    "$" : [ ＄ ]
  half_shape:
    "\\" : [ ¥ ]
    "$" : [ $ ]

key_binder:
  import_preset: default
  bindings:
    - { when: has_menu, accept: comma, send: comma }
    - { when: has_menu, accept: period, send: period }
    - { when: has_menu, accept: minus, send: minus }
    - { when: has_menu, accept: equal, send: equal }
    - { when: has_menu, accept: space, send: Down }
    - { when: has_menu, accept: Return, send: space }

recognizer:
  import_preset: default
